## 词法作用域
作用域有两套工作模型：词法作用域和动态作用域。词法作用域就是定义在词法阶段的作用域。
每个函数都会创造一个新的作用域。

### 查找
作用域查找会在找到第一个匹配的标识符时停止。
词法作用域查找只会查找一级标识符，如果查找一个对象里面的属性，对象属性访问规则会接管查找。

### 欺骗词法
有两种机制，对性能不好。

#### eval
通过假装成书写时（也就是词法期）代码来实现修改词法作用域环境。严格模式下eval有自己的作用域。
```
function foo(str, a) { 
    eval( str ); // 欺骗！ 
    console.log( a, b ); 
} 
 
var b = 2; 
 
foo( "var b = 3;", 1 ); // 1, 3
```
这个eval就改变了作用域，在foo里面声明了一个b。
setTimeout(..)和setInterval(..)的第一个参数可以是字符串，和eval类似。不推荐使用。new Function(..)函数的行为也很类似。

#### with
不推荐使用。with通常被当作重复引用同一个对象中的多个属性的快捷方式，可以不需要重复引用对象本身。
```
with (obj) { 
    a = 3; 
    b = 4; 
    c = 5; 
}
```
在书中的例子里，with带来的副作用是把变量泄露到全局去了。实际上是根据你传递给它的对象凭空创建了一个全新的词法作用域。

#### 性能
有些优化依赖于能够根据代码的词法进行静态分析，如果出现了eval(..)或with，所有的优化可能都是无意义的。



